(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{284:function(s,t,a){"use strict";a.r(t);var e=a(14),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"表达式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#表达式"}},[s._v("#")]),s._v(" 表达式")]),s._v(" "),t("p",[s._v("在开始编写查询之前，我们最好对sql的表达式有一些了解。")]),s._v(" "),t("p",[s._v("easysql中封装了sql的语法树，sql的表达式拥有共同的父类"),t("code",[s._v("Expr")]),s._v("，而大部分表达式，它们也接收"),t("code",[s._v("Expr")]),s._v("类型的参数，来组合成新的表达式。")]),s._v(" "),t("p",[s._v("因此，easysql拥有强大的抽象能力，通过表达式的组合，我们几乎可以写出任何sql中合法的语句，而无需使用容易出错的原生sql。")]),s._v(" "),t("h2",{attrs:{id:"字段"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#字段"}},[s._v("#")]),s._v(" 字段")]),s._v(" "),t("p",[s._v("字段是最基本的表达式，上文中，我们使用"),t("code",[s._v("asTable")]),s._v("创建的元数据对象，它的属性就是字段类型的表达式。")]),s._v(" "),t("p",[s._v("有了字段表达式，我们就可以写这样的查询：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from user\n")])])]),t("p",[t("code",[s._v("select")]),s._v("传入使用"),t("code",[s._v("asTable")]),s._v("产生的对象的话，可以在查询中自动展开全部字段：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from user\n")])])]),t("p",[s._v("如果你喜欢，也可以在"),t("code",[s._v("asTable")]),s._v("生成的对象后面添加"),t("code",[s._v("*")]),s._v("，使其更接近原生sql，这并不会改变查询的意义：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("*"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from user\n")])])]),t("p",[s._v("有些应用里，表是运行期动态创建的，没法对数据进行预先建模，这时候可以使用"),t("code",[s._v("col")]),s._v("方法来创建一个动态字段；")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("col"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"t.id"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"t"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("p",[t("code",[s._v("col")]),s._v("可以携带类型参数，我们可以精确指定字段类型：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" idCol "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" col"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("Int")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"t.id"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("idCol"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"t"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" where idCol "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),t("blockquote",[t("p",[s._v("在非常动态的查询中（比如编译期我们对数据的模型一无所知的情况下），也可以不给col添加类型参数，而是导入import easysql.dsl.unsafeOperator。这样就会放弃类型安全，但是会让动态查询更方便，不过在大多数可以配置元数据的场景中，不推荐这样做。")])]),s._v(" "),t("p",[s._v("库内置了一个名为"),t("code",[s._v("*")]),s._v("的方法，用来产生一个字段通配符：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("AllColumn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("`"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("`\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from table"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"t"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("blockquote",[t("p",[s._v("同样主要用于非常动态的查询")])]),s._v(" "),t("h2",{attrs:{id:"别名"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#别名"}},[s._v("#")]),s._v(" 别名")]),s._v(" "),t("p",[t("code",[s._v("Expr")]),s._v("表达式可以使用"),t("code",[s._v("as")]),s._v("方法，用来起别名：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id as "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"c1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name as "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"c2"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from user\n")])])]),t("p",[t("code",[s._v("as")]),s._v("方法可以推广到后续介绍的任何sql表达式类型，后文便不再赘述。")]),s._v(" "),t("p",[s._v("值得一提的是："),t("code",[s._v("as")]),s._v("方法使用了一种名为"),t("code",[s._v("refinement type")]),s._v("的手段达到类型安全，"),t("code",[s._v("as")]),s._v("的参数如果为"),t("strong",[s._v("空字符串")]),s._v("，则不能通过编译：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 编译错误")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id as "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from user\n")])])]),t("p",[s._v("如果别名需要运行期动态确定，可以使用"),t("code",[s._v("unsafeAs")]),s._v("方法。")]),s._v(" "),t("h2",{attrs:{id:"值"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#值"}},[s._v("#")]),s._v(" 值")]),s._v(" "),t("p",[s._v("有一些需求中，可能需要把值作为查询结果集的一列，比如：")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"col1"')]),s._v("\n")])])]),t("p",[s._v("为了实现这个需求，我们需要"),t("code",[s._v("import easysql.dsl.Expr.given")]),s._v("：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("Expr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("given")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" as "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"col1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"a"')]),s._v(" as "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"col2"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("p",[s._v("如果有一些特殊的需求，比如下文会介绍的自定义sql函数，我们也可以使用"),t("code",[s._v("value()")]),s._v("将值包装起来，生成一个值表达式：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" expr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Expr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("Int")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h2",{attrs:{id:"逻辑运算与关系运算"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#逻辑运算与关系运算"}},[s._v("#")]),s._v(" 逻辑运算与关系运算")]),s._v(" "),t("p",[s._v("除开字段和常量之外，最常见的表达式就是逻辑运算与关系运算构成的表达式。它常被用于sql的where条件中。")]),s._v(" "),t("p",[s._v("支持的符号运算符如下：")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"center"}},[s._v("运算符名称")]),s._v(" "),t("th",{staticStyle:{"text-align":"center"}},[s._v("对应sql运算符")])])]),s._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v("===")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v("=")])])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v("<>")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v("<>")])])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v(">")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v(">")])])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v(">=")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v(">=")])])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v("<")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v("<")])])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v("<=")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v("<=")])])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v("&&")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v("AND")])])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v("||")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v("OR")])])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v("^")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v("XOR")])])])])]),s._v(" "),t("p",[s._v("使用这些运算符就如同语言内置的一样：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"x"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from user where user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" name \n")])])]),t("p",[s._v("二元运算的右侧，不仅可以是值，也可以是其他表达式，比如做join语句的连接条件：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" post"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from user join post on user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" post"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("userId\n")])])]),t("p",[s._v("当然，运算符的左侧也可以是普通的值，easysql使用"),t("code",[s._v("typeclass（类型类）")]),s._v("对运算符进行扩展，这种情况我们需要"),t("code",[s._v("import easysql.dsl.Expr.given")]),s._v("：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("Expr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("given")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from user where "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id\n")])])]),t("blockquote",[t("p",[t("code",[s._v("===")]),s._v("与"),t("code",[s._v("<>")]),s._v("在与"),t("code",[s._v("None")]),s._v("比较时，生成的sql为"),t("code",[s._v("IS NULL")]),s._v("与"),t("code",[s._v("IS NOT NULL。")])])]),s._v(" "),t("blockquote",[t("p",[s._v("字符串也可以和"),t("code",[s._v("Date")]),s._v("类型的表达式进行比较。")])]),s._v(" "),t("p",[s._v("除开这些符号组成的运算，还支持下面这些非符号运算符。由于这些运算符没有编译器控制的优先级，所以更推荐使用"),t("code",[s._v(".")]),s._v("加上方法名的方式调用，而非中缀的方式：")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"center"}},[s._v("运算符名称")]),s._v(" "),t("th",{staticStyle:{"text-align":"center"}},[s._v("对应sql运算符")])])]),s._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v("in")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v("IN")])])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v("notIn")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v("NOT IN")])])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v("between")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v("BETWEEN")])])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v("notBetween")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v("NOT BETWEEN")])])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v("like")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v("LIKE")])])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v("notLike")])]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[t("code",[s._v("NOT LIKE")])])])])]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from user where user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("between"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("in"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"x"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"y"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from user where user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("like"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"x%"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("p",[s._v("这些运算符的抽象能力也一样强大：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("Expr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("given")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from user where user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("in"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from user where "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v("in"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("blockquote",[t("p",[s._v("in运算符为了避免生成的查询语法错误，如果in后面的参数是空列表，那么会把此部分的条件改写为FALSE，notIn空列表时会把此部分改写为TRUE。")])]),s._v(" "),t("p",[s._v("此外，还支持一元逻辑运算"),t("code",[s._v("!")]),s._v("：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from user where "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("blockquote",[t("p",[s._v("生成的sql为"),t("code",[s._v("NOT()")]),s._v("。")])]),s._v(" "),t("h2",{attrs:{id:"数学运算"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数学运算"}},[s._v("#")]),s._v(" 数学运算")]),s._v(" "),t("p",[s._v("除开上面的逻辑运算外，还支持"),t("code",[s._v("+")]),s._v("、"),t("code",[s._v("-")]),s._v("、"),t("code",[s._v("*")]),s._v("、"),t("code",[s._v("/")]),s._v("、"),t("code",[s._v("%")]),s._v("五个数学运算：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from user where user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n")])])]),t("p",[s._v("普通的值也可以写在表达式左侧。")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from user where "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n")])])]),t("h2",{attrs:{id:"聚合函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#聚合函数"}},[s._v("#")]),s._v(" 聚合函数")]),s._v(" "),t("p",[s._v("库内置了几个常用的标准聚合函数："),t("code",[s._v("count")]),s._v("、"),t("code",[s._v("countDistinct")]),s._v("、"),t("code",[s._v("max")]),s._v("、"),t("code",[s._v("min")]),s._v("、"),t("code",[s._v("sum")]),s._v("、"),t("code",[s._v("avg")]),s._v("：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("count"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" as "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"col1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" as "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"col2"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from user\n")])])]),t("p",[s._v("聚合函数也可以成为其他表达式的一部分：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("count"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" avg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" sum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" as "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"col1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from user\n")])])]),t("p",[s._v("有趣的是，上面介绍的用于创建字段通配符的"),t("code",[s._v("*")]),s._v("，也是"),t("code",[s._v("Expr")]),s._v("的子类，所以我们可以像真正的sql一样写：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("AllColumn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("`"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("`\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("count"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from user\n")])])]),t("p",[s._v("您也可以从此处看出easysql表达式组合的威力。")]),s._v(" "),t("h2",{attrs:{id:"普通函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#普通函数"}},[s._v("#")]),s._v(" 普通函数")]),s._v(" "),t("p",[s._v("由于各种数据库的函数差异极大，easysql没有内置普通的函数，但是我们可以通过"),t("code",[s._v("Expr")]),s._v("的子类"),t("code",[s._v("FuncExpr")]),s._v("来定义需要的sql函数。")]),s._v(" "),t("p",[t("code",[s._v("FuncExpr")]),s._v("的定义如下：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" FuncExpr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("T "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" SqlDataType"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" args"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" List"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Expr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("_"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" Expr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("T"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("p",[s._v("其中，类型参数"),t("code",[s._v("T")]),s._v("是sql函数的返回值类型，"),t("code",[s._v("name")]),s._v("是函数名称，"),t("code",[s._v("args")]),s._v("是参数列表。")]),s._v(" "),t("p",[s._v("以mysql的LEFT函数为例，LEFT接收两个参数，第一个参数是一个String类型的表达式，第二个参数是一个Int值，我们可以这样来封装：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" left"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("expr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Expr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("Int")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" FuncExpr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"LEFT"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" List"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("expr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("p",[s._v("然后这个函数就可以带入进查询了：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("left"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" as "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"left"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from user\n")])])]),t("p",[s._v("当然，与其他表达式一样，函数也可以嵌套调用：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("left"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("left"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" as "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"left"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from user\n")])])]),t("p",[s._v("对于聚合函数，也提供了类似的封装结构：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" AggExpr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("T "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" SqlDataType"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    args"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" List"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Expr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("_"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    distinct"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("Boolean")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    attributes"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Map"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Expr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("_"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    orderBy"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" List"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OrderBy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" Expr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("T"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("p",[s._v("有需要的话，也可以用来封装聚合函数来带入到查询里。")]),s._v(" "),t("h2",{attrs:{id:"窗口函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#窗口函数"}},[s._v("#")]),s._v(" 窗口函数")]),s._v(" "),t("p",[s._v("内置了三个标准的窗口函数使用的聚合函数："),t("code",[s._v("rank")]),s._v(", "),t("code",[s._v("denseRank")]),s._v(", "),t("code",[s._v("rowNumber")]),s._v("。")]),s._v(" "),t("p",[s._v("在聚合函数后面调用"),t("code",[s._v(".over")]),s._v("，来创建一个窗口函数，然后通过"),t("code",[s._v("partitionBy")]),s._v("和"),t("code",[s._v("orderBy")]),s._v("来构建一个窗口：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[s._v("select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rank"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("over partitionBy user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id orderBy user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("asc as "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"over"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from user\n")])])]),t("p",[s._v("这会产生如下的查询：")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" RANK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("OVER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user_name "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ASC")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("over")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v("\n")])])]),t("p",[t("code",[s._v("partitionBy()")]),s._v("接收若干个表达式类型")]),s._v(" "),t("p",[t("code",[s._v("orderBy()")]),s._v("接收若干个排序列，在表达式类型之后调用"),t("code",[s._v(".asc")]),s._v("或"),t("code",[s._v(".desc")]),s._v("来生成排序规则。")]),s._v(" "),t("blockquote",[t("p",[s._v("使用窗口函数时需要注意数据库本身是否支持（比如mysql8.0以下版本不支持窗口函数功能）。")])]),s._v(" "),t("p",[s._v("我们也可以在窗口函数中使用"),t("code",[s._v("rowsBetween")]),s._v("或"),t("code",[s._v("rangeBetween")]),s._v("筛选行，比如：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[s._v("select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rank"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("over partitionBy user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id orderBy user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("asc rowsBetween"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.")]),s._v("preceding"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" currentRow"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" as "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"over"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from user\n")])])]),t("p",[t("code",[s._v("rowsBetween")]),s._v("或"),t("code",[s._v("rangeBetween")]),s._v("中的参数可以是"),t("code",[s._v("unboundedPreceding")]),s._v("、"),t("code",[s._v("unboundedFollowing")]),s._v("、"),t("code",[s._v("currentRow")]),s._v("以及"),t("code",[s._v("Int")]),s._v("的扩展方法"),t("code",[s._v("preceding")]),s._v("、"),t("code",[s._v("following")]),s._v("中的任意两项。")]),s._v(" "),t("h2",{attrs:{id:"case-when"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#case-when"}},[s._v("#")]),s._v(" case when")]),s._v(" "),t("p",[s._v("使用"),t("code",[s._v("caseWhen()")]),s._v("方法创建一个条件表达式，由于此表达式用到的关键字"),t("code",[s._v("case")]),s._v("、"),t("code",[s._v("then")]),s._v("、"),t("code",[s._v("else")]),s._v("等都是Scala3的关键字，所以只能使用中缀函数"),t("code",[s._v("thenIs")]),s._v("与"),t("code",[s._v("elseIs")]),s._v("来生成一个条件表达式：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" c "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" caseWhen"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("state "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" thenIs "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"正常"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gender "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" thenIs "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"删除"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" elseIs "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"其他"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c as "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"state"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from user\n")])])]),t("p",[s._v("这会产生下面的查询：")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CASE")]),s._v(" \n\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("state "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'正常'")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("state "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'删除'")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ELSE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'其他'")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" state\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v("\n")])])]),t("p",[s._v("case when表达式也可以传入聚合函数中：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" c "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" caseWhen"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("state "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" thenIs user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("state"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" elseIs None\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("count"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" as "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"count"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from user\n")])])]),t("h2",{attrs:{id:"cast类型转换"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cast类型转换"}},[s._v("#")]),s._v(" cast类型转换")]),s._v(" "),t("p",[s._v("使用"),t("code",[s._v("cast")]),s._v("方法生成一个cast表达式用于数据库类型转换。")]),s._v(" "),t("p",[s._v("第一个参数为待转换的表达式；")]),s._v(" "),t("p",[s._v("第二个参数为String，为想转换的数据类型。")]),s._v(" "),t("p",[s._v("比如：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cast"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CHAR"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from user\n")])])]),t("p",[s._v("这会产生下面的查询：")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" CAST"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CHAR")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v("\n")])])]),t("h2",{attrs:{id:"json操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#json操作"}},[s._v("#")]),s._v(" json操作")]),s._v(" "),t("p",[s._v("支持"),t("code",[s._v("->")]),s._v("和"),t("code",[s._v("->>")]),s._v("两个json操作符，语义与原生sql一致。")]),s._v(" "),t("p",[s._v("由于"),t("code",[s._v("->")]),s._v("与标准库构建二元组的函数名相同，为了避免编译错误，我们需要导入"),t("code",[s._v("easysql.dsl.Expr.given")]),s._v("。")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("Expr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("given")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// mysql")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jsonCol "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$.x.y"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from user where user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jsonCol "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$.x.y"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"a"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// pgsql")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jsonCol "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"x"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"y"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from user where user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jsonCol "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"x"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"y"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"a"')]),s._v("\n")])])]),t("p",[s._v("如需使用json操作函数的话，可以参考上文sql函数部分的说明进行封装。")]),s._v(" "),t("p",[s._v("json操作会在数据库查询后被映射到String类型。")]),s._v(" "),t("h2",{attrs:{id:"动态表达式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#动态表达式"}},[s._v("#")]),s._v(" 动态表达式")]),s._v(" "),t("p",[s._v("有些需要动态查询的场景中（比如报表平台），查询的表达式可能是由用户动态填写的，如果想对填写的内容进行解析，可能需要开发者有一定的编译原理功底，不过，easysql支持将普通的sql字符串当做表达式的一部分，即使开发者没有这种功底，也可以方便地解析用户创建的动态表达式。")]),s._v(" "),t("p",[s._v("解析一个动态的表达式，可以使用上文字段部分介绍的"),t("code",[s._v("col")]),s._v("方法，"),t("code",[s._v("col")]),s._v("不仅可以处理简单的字段名，也可以处理更复杂的表达式，并将其代入查询中：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" dynExpr1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" col"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"case when user.id = 1 then 'a' when user.id = 2 then 'b' else 'c'\"")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" dynExpr2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" col"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Boolan"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user.id in (1, 2, 3) or user.name is not null"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" dynExpr1 as "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"col3"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from user where dynExpr2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("createTime "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2023-01-01"')]),s._v("\n")])])]),t("p",[s._v("在使用"),t("code",[s._v("col")]),s._v("创建动态表达式时，会对传入的sql表达式进行解析，如果其中有语法错误，则会抛出"),t("code",[s._v("easysql.parser.ParseException")]),s._v("异常，并说明错误位置。")]),s._v(" "),t("p",[s._v("动态表达式支持子查询谓词和窗口函数在内的大多数sql表达式。")]),s._v(" "),t("h2",{attrs:{id:"日期间隔表达式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#日期间隔表达式"}},[s._v("#")]),s._v(" 日期间隔表达式")]),s._v(" "),t("p",[s._v("我们可以使用"),t("code",[s._v("interval")]),s._v("方法生成日期间隔表达式（"),t("strong",[s._v("目前仅支持生成MySQL和PostgreSQL方言")]),s._v("）：")]),s._v(" "),t("div",{staticClass:"language-scala extra-class"},[t("pre",{pre:!0,attrs:{class:"language-scala"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("easysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// mysql")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2023-01-01 00:00:00"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" interval"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" day"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// pgsql")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("val")]),s._v(" s2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" select "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2023-01-01 00:00:00"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" interval"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1 days"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);